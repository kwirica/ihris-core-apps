import{V as G,a as W,b as j,c as J,d as K,e as A,f as L,g as S}from"./VisualizationBuilder-4a236344.js";import{_ as X,r as F,o as u,c,w as l,a as t,V as w,b as Q,d as r,e as Z,f as v,g as k,h as P,i as M,j as N,t as x,k as f,l as b,m as I,n as D,p as C,F as g,q as B,s as _,u as O,v as H,x as R,y as U,z as E,A as $,B as ee,C as ie}from"./index-5c26168b.js";import{V as te}from"./VContainer-0ba64734.js";import{V as p}from"./VCol-88ee311f.js";const le={props:{edit:{type:Boolean,default:!1}},data(){return{dashboards:[],loadingDashData:!1,editingDash:!1,deleteDash:!1,visualizations:[],dimensions:[],displayVizList:!1,loadingAvailableVizs:!1,availableViz:[],hardRerenderViz:0,title:"",dashboardId:"",chart_layout:{},showValuesSelector:!1,filters:[],activeDimension:{dimValues:[],selectedValues:[],nonRangeFilterValues:[],filterCondition:"include",nonRangeFilterCondition:"=",data:"",loading:!1},nonRangeFilterConditions:[{title:"Equal",value:"="},{title:"Range",value:"range"},{title:"Greater than",value:"gt"},{title:"Greater than or equal",value:"gte"},{title:"Less than",value:"lt"},{title:"Less than or equal",value:"lte"}],fromRange:{},toRange:{},nonRangeFilter:{}}},watch:{fromRange:{handler(s){if(s){let e=s[this.activeDimension.data.name];if(this.activeDimension.data.type==="date"&&(e=this.$moment(e).format("DD-MM-YYYY")),this.activeDimension.selectedValues.length){let n=this.activeDimension.selectedValues[0].split(" to ");n[0]=e,this.activeDimension.selectedValues[0]=n.join(" to ")}else this.activeDimension.selectedValues[0]=e+" to "}},deep:!0},toRange:{handler(s){if(s){let e=s[this.activeDimension.data.name];if(this.activeDimension.data.type==="date"&&(e=this.$moment(e).format("DD-MM-YYYY")),this.activeDimension.selectedValues.length){let n=this.activeDimension.selectedValues[0].split(" to ");n[1]=e,this.activeDimension.selectedValues[0]=n.join(" to ")}else this.activeDimension.selectedValues[0]="  to "+e}},deep:!0},nonRangeFilter:{handler(s){this.activeDimension.data.type==="date"?this.activeDimension.selectedValues[0]=this.$moment(s[this.activeDimension.data.name]).format("DD-MM-YYYY"):this.activeDimension.selectedValues[0]=s[this.activeDimension.data.name]},deep:!0},activeDimension:{handler(){if(!this.activeDimension.data.name)return;const s=this.filters.findIndex(n=>n.name===this.activeDimension.data.name),e={name:this.activeDimension.data.name,display:this.activeDimension.data.display,values:this.activeDimension.selectedValues,type:this.activeDimension.data.type,filterCondition:this.activeDimension.filterCondition};if(Array.isArray(e.values)||(e.values=[e.values]),e.type==="date"&&e.filterCondition==="range"&&e.values.length>1){let n=this.$moment(e.values[0]).format("DD-MM-YYYY"),d=this.$moment(e.values[e.values.length-1]).format("DD-MM-YYYY");e.values=[n+" to "+d]}!this.activeDimension.selectedValues||this.activeDimension.selectedValues.length===0?s>-1&&this.filters.splice(s,1):s===-1?this.filters.push(e):this.filters[s]=e},deep:!0}},computed:{supportsRange(){return this.activeDimension.data.type==="date"||this.activeDimension.data.type==="long"},canSave(){return!!(this.visualizations.length>0&&this.title)},draggable(){return!!this.editingDash},resizable(){return!!this.editingDash}},methods:{listDashboard(){this.dashboards=[],this.loading=!0,this.displayDashList=!0,this.getDashboards().then(()=>{this.loading=!1})},getDashboards(s){return new Promise((e,n)=>{s||(s="/fhir/Basic?_profile=http://ihris.org/fhir/StructureDefinition/ihris-dashboard"),fetch(s).then(d=>{d.json().then(i=>{if(i&&i.entry&&i.entry.length)for(const h of i.entry){const V=h.resource.extension.find(z=>z.url==="http://ihris.org/fhir/StructureDefinition/ihris-basic-name");V&&this.dashboards.push({id:h.resource.id,name:V.valueString})}const o=i.link.find(h=>h.relation==="next");if(o)o.url=o.url.substring(o.url.indexOf("/fhir/")),this.getDashboards(o.url).then(()=>e()).catch(h=>n(h));else return e()})})})},cancelEditing(){this.dashboardId?this.editingDash=!1:this.$router.push({name:"home"})},deleteDashboard(){this.dashboardId?fetch("/fhir/Basic/"+this.dashboardId,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(()=>{this.$router.push({name:"home"})}):this.$router.push({name:"home"})},applyFilters(){this.showValuesSelector=!1,this.reloadAllViz(),this.activeDimension.data=""},removeFilter(s,e){this.filters[s].values.splice(e,1),this.filters[s].values.length===0&&this.filters.splice(s,1),this.reloadAllViz()},reloadAllViz(){this.hardRerenderViz++},activateDimension(s){this.showValuesSelector=!0,this.activeDimension.loading=!0,this.activeDimension.dimValues=[],this.activeDimension.selectedValues=[],s.type==="date"||s.type==="long"||s.type==="float"?this.activeDimension.filterCondition="=":this.activeDimension.filterCondition="include";const e=this.filters.find(n=>n.name===this.activeDimension.data.name);if(e&&(this.activeDimension.filterCondition=e.filterCondition,this.activeDimension.selectedValues=JSON.parse(JSON.stringify(e.values))),s.type!=="date"&&s.type!=="long"&&s.type!=="float"){const n=`/es/populateFilter/${s.dataset.name}/${s.name}?dataType=${s.type}&hasKeyword=${s.hasKeyword}`;fetch(n,{method:"GET"}).then(d=>{d.json().then(i=>{this.activeDimension.loading=!1;for(const o of i)this.activeDimension.dimValues.push({name:o.key.value})})})}else this.activeDimension.loading=!1},popDimensions(s){for(const e of s.data)this.dimensions.find(d=>d.name===e.name)||(e.dataset=s.dataset,this.dimensions.push(e))},getDashboard(){this.loadingDashData=!0,this.visualizations=[],fetch("/fhir/Basic/"+this.dashboardId).then(s=>{s.json().then(e=>{this.loadingDashData=!1;for(const n of e.extension)if(n.url==="http://ihris.org/fhir/StructureDefinition/ihris-basic-name"&&(this.title=n.valueString),n.url==="http://ihris.org/fhir/StructureDefinition/ihris-dashboard-visualization"){const d=n.extension.find(m=>m.url==="vizID").valueString,i=n.extension.find(m=>m.url==="horizontal").valueDecimal,o=n.extension.find(m=>m.url==="vertical").valueDecimal,h=n.extension.find(m=>m.url==="width").valueDecimal,V=n.extension.find(m=>m.url==="height").valueDecimal,z=n.extension.find(m=>m.url==="heightPx").valueDecimal,Y=n.extension.find(m=>m.url==="itemID").valueInteger,a=n.extension.find(m=>m.url==="static").valueBoolean;this.visualizations.push({id:d,x:i,y:o,w:h,h:V,hPx:z,i:Y,static:a})}})})},resizeEvent:function(s,e,n,d,i){const o=this.visualizations.find(h=>h.i===s);o.hPx=d-36,o.rerender++},resizedEvent(s,e,n,d,i){const o=this.visualizations.find(h=>h.i===s);o.hPx=d-36,o.rerender++},listViz(){this.loadingAvailableVizs=!0,this.displayVizList=!0,this.availableViz=[],this.getViz().then(()=>{this.loadingAvailableVizs=!1})},getViz(s){return new Promise((e,n)=>{s||(s="/fhir/Basic?_count=200&_profile=http://ihris.org/fhir/StructureDefinition/ihris-data-visualization"),fetch(s).then(d=>{d.json().then(i=>{if(i.entry&&i.entry.length)for(const h of i.entry){const V=h.resource.extension.find(z=>z.url==="http://ihris.org/fhir/StructureDefinition/ihris-basic-name");V&&this.availableViz.push({id:h.resource.id,name:V.valueString})}const o=i.link.find(h=>h.relation==="next");if(o)o.url=o.url.substring(o.url.indexOf("/fhir/")),this.getViz(o.url).then(()=>e()).catch(h=>n(h));else return e()})})})},addVizualization(s){let e=0,n=0;for(const d of this.visualizations)d.y>e&&(e=d.y),d.x>n&&(n=d.x);this.visualizations.length>0&&(e+=11.2),this.visualizations.push({id:s,x:n,y:e,w:6,h:11.2,hPx:400,i:this.visualizations.length,static:!1,rerender:0})},save(){const s={resourceType:"Basic",meta:{profile:["http://ihris.org/fhir/StructureDefinition/ihris-dashboard"]},code:{coding:[{code:"visualization",system:"http://ihris.org/fhir/CodeSystem/ihris-resource-codesystem"}]},extension:[{url:"http://ihris.org/fhir/StructureDefinition/ihris-basic-name",valueString:this.title}]};let e=0;for(const d of this.visualizations)s.extension.push({url:"http://ihris.org/fhir/StructureDefinition/ihris-dashboard-visualization",extension:[{url:"vizID",valueString:d.id},{url:"horizontal",valueDecimal:d.x},{url:"vertical",valueDecimal:d.y},{url:"width",valueDecimal:d.w},{url:"height",valueDecimal:d.h},{url:"heightPx",valueDecimal:d.hPx},{url:"itemID",valueInteger:e},{url:"static",valueBoolean:d.static}]}),e++;let n="POST";this.dashboardId?(n="PUT",s.id=this.dashboardId):this.dashboardId="",fetch("/fhir/Basic/"+this.dashboardId,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(d=>{if(d.status!==200&&d.status!==201){this.$store.commit("setMessage",{type:"error",text:"Failed to save Dashboard!",timeout:2e3});return}d.json().then(i=>{this.$store.commit("setMessage",{type:"primary",text:"Dashboard saved successfully!",timeout:4e3}),this.dashboardId=i.id})}).catch(d=>{this.$store.commit("setMessage",{type:"error",text:"Failed to save Dashboard!",timeout:2e3}),console.error("Error:",d)})},removeViz(s){const e=this.visualizations.findIndex(n=>n.i===s);e>-1&&this.visualizations.splice(e,1)},reload(){this.dashboardId?this.getDashboard():this.visualizations=[]}},created(){this.$route.params.id||(this.editingDash=!0),this.dashboardId=this.$route.params.id,this.dashboardId&&this.getDashboard(),this.listDashboard()},components:{VisualizationBuilder:G}},ae=R("br",null,null,-1),se=R("br",null,null,-1),ne=R("br",null,null,-1),oe=R("br",null,null,-1),re={style:{"font-size":"13px",cursor:"pointer"}},de={key:1,style:{"text-align":"center"}};function ue(s,e,n,d,i,o){const h=F("v-date-input"),V=F("VisualizationBuilder"),z=F("grid-item"),Y=F("grid-layout");return u(),c(te,{fluid:""},{default:l(()=>[t(P,{modelValue:i.deleteDash,"onUpdate:modelValue":e[1]||(e[1]=a=>i.deleteDash=a),persistent:"",width:"auto"},{default:l(()=>[t(w,null,{default:l(()=>[t(Q,{class:"text-h5"},{default:l(()=>[r(" Are you sure you want to delete this Dashboard? ")]),_:1}),t(Z,{class:"justify-end"},{default:l(()=>[t(v,{color:"green darken-1",text:"",onClick:e[0]||(e[0]=a=>i.deleteDash=!1)},{default:l(()=>[r(" No ")]),_:1}),t(k),t(v,{color:"red darken-1",text:"",onClick:o.deleteDashboard},{default:l(()=>[r("Yes ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{persistent:"",transition:"dialog-top-transition",modelValue:i.showValuesSelector,"onUpdate:modelValue":e[12]||(e[12]=a=>i.showValuesSelector=a),width:"560px"},{default:l(()=>[t(M,{color:"primary",density:"compact",height:"40px"},{default:l(()=>[t(N,null,{default:l(()=>[r(" Values For "+x(i.activeDimension.data.display),1)]),_:1}),t(k),t(f,{onClick:e[2]||(e[2]=a=>i.showValuesSelector=!1),style:{cursor:"pointer"}},{default:l(()=>[r("mdi-close")]),_:1})]),_:1}),o.supportsRange?(u(),c(w,{key:1,class:"overflow-auto"},{default:l(()=>[t(b,{justify:"center"},{default:l(()=>[t(p,{cols:"6",offset:"3"},{default:l(()=>[ne,t(K,{items:i.nonRangeFilterConditions,modelValue:i.activeDimension.filterCondition,"onUpdate:modelValue":e[5]||(e[5]=a=>i.activeDimension.filterCondition=a),label:"Condition"},null,8,["items","modelValue"])]),_:1}),t(k),t(p,{cols:"2"},{default:l(()=>[oe,t(v,{color:"accent",size:"small",onClick:o.applyFilters},{default:l(()=>[r(" Apply ")]),_:1},8,["onClick"])]),_:1})]),_:1}),i.activeDimension.data.type==="date"?(u(),c(I,{key:0},{default:l(()=>[t(b,{justify:"space-around"},{default:l(()=>[i.activeDimension.filterCondition==="range"?(u(),D(g,{key:0},[t(h,{modelValue:i.fromRange[i.activeDimension.data.name],"onUpdate:modelValue":e[6]||(e[6]=a=>i.fromRange[i.activeDimension.data.name]=a),label:"From Date","max-width":"368"},null,8,["modelValue"]),t(h,{modelValue:i.toRange[i.activeDimension.data.name],"onUpdate:modelValue":e[7]||(e[7]=a=>i.toRange[i.activeDimension.data.name]=a),label:"To Date","max-width":"368"},null,8,["modelValue"])],64)):(u(),c(h,{key:1,modelValue:i.nonRangeFilter[i.activeDimension.data.name],"onUpdate:modelValue":e[8]||(e[8]=a=>i.nonRangeFilter[i.activeDimension.data.name]=a),label:"Select Date","max-width":"368"},null,8,["modelValue"]))]),_:1})]),_:1})):i.activeDimension.data.type==="long"?(u(),c(I,{key:1},{default:l(()=>[t(b,{justify:"space-around"},{default:l(()=>[i.activeDimension.filterCondition==="range"?(u(),D(g,{key:0},[t(B,{modelValue:i.fromRange[i.activeDimension.data.name],"onUpdate:modelValue":e[9]||(e[9]=a=>i.fromRange[i.activeDimension.data.name]=a),label:"From","max-width":"160",type:"number"},null,8,["modelValue"]),t(B,{modelValue:i.toRange[i.activeDimension.data.name],"onUpdate:modelValue":e[10]||(e[10]=a=>i.toRange[i.activeDimension.data.name]=a),label:"To","max-width":"160",type:"number"},null,8,["modelValue"])],64)):(u(),c(B,{key:1,label:"Filter Value","max-width":"160",type:"number",modelValue:i.nonRangeFilter[i.activeDimension.data.name],"onUpdate:modelValue":e[11]||(e[11]=a=>i.nonRangeFilter[i.activeDimension.data.name]=a)},null,8,["modelValue"]))]),_:1})]),_:1})):_("",!0)]),_:1})):(u(),c(w,{key:0,class:"overflow-auto"},{default:l(()=>[t(b,null,{default:l(()=>[t(p,{cols:"auto"},{default:l(()=>[ae,t(W,{inline:"",modelValue:i.activeDimension.filterCondition,"onUpdate:modelValue":e[3]||(e[3]=a=>i.activeDimension.filterCondition=a)},{default:l(()=>[t(j,{label:"Include",value:"include"}),t(j,{label:"Exclude",value:"exclude"})]),_:1},8,["modelValue"])]),_:1}),t(k),t(p,{cols:"2"},{default:l(()=>[se,t(v,{color:"accent",size:"small",onClick:o.applyFilters},{default:l(()=>[r(" Apply ")]),_:1},8,["onClick"])]),_:1})]),_:1}),t(I,null,{default:l(()=>[(u(!0),D(g,null,C(i.filters,(a,m)=>(u(),D(g,null,[a.name===i.activeDimension.data.name?(u(!0),D(g,{key:0},C(a.values,(y,T)=>(u(),c(A,{key:y.name,color:"green","text-color":"red",variant:"outlined",closable:"","onClick:close":q=>o.removeFilter(m,T)},{default:l(()=>[r(x(y.name),1)]),_:2},1032,["onClick:close"]))),128)):_("",!0)],64))),256)),t(J,{"hide-default-header":"","items-per-page":20,headers:[{key:"name",title:"name"}],items:i.activeDimension.dimValues,loading:i.activeDimension.loading,dense:"","show-select":"","return-object":"",modelValue:i.activeDimension.selectedValues,"onUpdate:modelValue":e[4]||(e[4]=a=>i.activeDimension.selectedValues=a)},null,8,["items","loading","modelValue"])]),_:1})]),_:1}))]),_:1},8,["modelValue"]),t(P,{transition:"dialog-top-transition",modelValue:i.displayVizList,"onUpdate:modelValue":e[14]||(e[14]=a=>i.displayVizList=a),width:"960px"},{default:l(()=>[t(M,{color:"primary",density:"compact",height:"40px"},{default:l(()=>[t(N,null,{default:l(()=>[r(" Available Vizualizations ")]),_:1}),t(k),t(f,{onClick:e[13]||(e[13]=a=>i.displayVizList=!1),style:{cursor:"pointer"}},{default:l(()=>[r("mdi-close")]),_:1})]),_:1}),t(O,{indeterminate:i.loadingAvailableVizs,active:i.loadingAvailableVizs,color:"secondary"},null,8,["indeterminate","active"]),t(w,null,{default:l(()=>[t(I,null,{default:l(()=>[i.availableViz.length>0?(u(),c(H,{key:0,shaped:"",density:"compact"},{default:l(()=>[(u(!0),D(g,null,C(this.availableViz,(a,m)=>(u(),c(U,{key:m,onClick:y=>o.addVizualization(a.id)},{prepend:l(()=>[t(f,{icon:"mdi-menu-right"})]),default:l(()=>[t(E,null,{default:l(()=>[R("label",re,x(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(b,null,{default:l(()=>[t(p,{cols:"12"},{default:l(()=>[t(b,null,{default:l(()=>[t(k),i.editingDash?(u(),c(p,{key:0,cols:"auto"},{default:l(()=>[t(v,{color:"tertiary",size:"small",onClick:e[15]||(e[15]=a=>s.$router.push({name:"home"}))},{default:l(()=>[t(f,{start:"",color:"primary"},{default:l(()=>[r("mdi-home")]),_:1}),r(" Home ")]),_:1}),r("   "),t(v,{color:"tertiary",size:"small",onClick:o.reload},{default:l(()=>[t(f,{start:"",color:"primary"},{default:l(()=>[r("mdi-reload")]),_:1}),r(" Reload ")]),_:1},8,["onClick"]),r("   "),t(v,{color:"tertiary",size:"small",onClick:o.save,disabled:!o.canSave},{default:l(()=>[t(f,{start:"",color:"primary"},{default:l(()=>[r("mdi-content-save-check")]),_:1}),r(" Save ")]),_:1},8,["onClick","disabled"]),r("   "),t(v,{color:"tertiary",size:"small",onClick:o.listViz},{default:l(()=>[t(f,{start:"",color:"primary"},{default:l(()=>[r("mdi-plus")]),_:1}),r(" Insert Visualization ")]),_:1},8,["onClick"]),r("   "),t(v,{color:"tertiary",size:"small",onClick:e[16]||(e[16]=a=>s.$router.push({name:"vizBuilder"}))},{default:l(()=>[t(f,{start:"",color:"primary"},{default:l(()=>[r("mdi-plus")]),_:1}),r(" Create Visualization ")]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(b,null,{default:l(()=>[t(p,{cols:"auto"},{default:l(()=>[i.editingDash?(u(),c(B,{key:0,size:"10",label:"Dashboard Title*",outlined:"",density:"compact",modelValue:i.title,"onUpdate:modelValue":e[17]||(e[17]=a=>i.title=a)},null,8,["modelValue"])):(u(),c(A,{key:1,variant:"outlined",label:"",size:"large"},{default:l(()=>[r(x(i.title),1)]),_:1}))]),_:1}),t(p,{cols:"auto"},{default:l(()=>[t(L,{size:"10",width:"260",modelValue:i.activeDimension.data,"onUpdate:modelValue":[e[18]||(e[18]=a=>i.activeDimension.data=a),o.activateDimension],items:i.dimensions,"item-title":"display","item-value":"name","return-object":"",clearable:"",label:"Filter By",density:"compact"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),i.editingDash?_("",!0):(u(),c(p,{key:0,cols:"auto"},{default:l(()=>[t(v,{icon:"",color:"tertiary",size:"small",onClick:e[19]||(e[19]=a=>i.editingDash=!0)},{default:l(()=>[t(f,{color:"primary"},{default:l(()=>[r("mdi-pencil")]),_:1}),t(S,{activator:"parent",location:"top"},{default:l(()=>[r(" Edit this dashboard ")]),_:1})]),_:1})]),_:1})),i.editingDash?(u(),c(p,{key:2,cols:"auto"},{default:l(()=>[t(v,{icon:"",color:"white",size:"small",onClick:o.cancelEditing},{default:l(()=>[t(f,{color:"error"},{default:l(()=>[r("mdi-close-thick")]),_:1}),t(S,{activator:"parent",location:"top"},{default:l(()=>[r(" Cancel Editing ")]),_:1})]),_:1},8,["onClick"])]),_:1})):(u(),c(p,{key:1,cols:"auto"},{default:l(()=>[t(v,{icon:"",color:"tertiary",size:"small",onClick:e[20]||(e[20]=a=>i.deleteDash=!0)},{default:l(()=>[t(f,{color:"error"},{default:l(()=>[r("mdi-delete-circle")]),_:1}),t(S,{activator:"parent",location:"top"},{default:l(()=>[r(" Delete this dashboard ")]),_:1})]),_:1})]),_:1})),t(k),t(p,{cols:"3"},{default:l(()=>[t(b,null,{default:l(()=>[t(p,{cols:"9"},{default:l(()=>[t(L,{modelValue:i.dashboardId,"onUpdate:modelValue":[e[21]||(e[21]=a=>i.dashboardId=a),e[22]||(e[22]=a=>s.$router.push({name:"dashBuilder",params:{edit:!1,id:i.dashboardId}}))],items:i.dashboards,"item-title":"name","item-value":"id",filled:"",density:"compact",label:"Other Dashboards"},null,8,["modelValue","items"])]),_:1}),i.dashboardId?(u(),c(p,{key:0,cols:"3"},{default:l(()=>[t(v,{icon:"",dark:"",color:"indigo",size:"small",onClick:e[23]||(e[23]=a=>s.$router.push({name:"dashBuilder",params:{edit:!0}}))},{default:l(()=>[t(f,null,{default:l(()=>[r("mdi-plus")]),_:1}),t(S,{activator:"parent",location:"top"},{default:l(()=>[r(" Add New Dashboard ")]),_:1})]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1}),(u(!0),D(g,null,C(i.filters,(a,m)=>(u(),D(g,null,[(u(!0),D(g,null,C(a.values,(y,T)=>(u(),c(A,{key:y.name,class:"ma-2",color:"green","text-color":"red",variant:"outlined",closable:"","onClick:close":q=>o.removeFilter(m,T)},{default:l(()=>[r(x(a.display)+": ",1),y.name?(u(),D(g,{key:0},[r(x(y.name),1)],64)):(u(),D(g,{key:1},[r(x(y)+" ",1)],64))]),_:2},1032,["onClick:close"]))),128))],64))),256)),i.loadingDashData?(u(),c(O,{key:0,indeterminate:!0})):i.visualizations.length===0?(u(),D("div",de," Your dashboard is blank. Click Add Visualization button to add dashboard items ")):_("",!0),t(Y,{layout:i.visualizations,"onUpdate:layout":e[24]||(e[24]=a=>i.visualizations=a),"col-num":14,"row-height":30,"is-draggable":o.draggable,"is-resizable":o.resizable,responsive:!1,restoreOnDrag:!0,"vertical-compact":!1,"prevent-collision":!1,"use-css-transforms":!0},{default:l(()=>[(u(!0),D(g,null,C(i.visualizations,a=>(u(),c(z,{static:a.static,x:a.x,y:a.y,w:a.w,h:a.h,i:a.i,key:a.i,onResize:o.resizeEvent,onResized:o.resizedEvent},{default:l(()=>[t(w,{height:a.hPx+37},{default:l(()=>[t($,{transition:"slide-y-transition",rounded:"b-xl","close-on-content-click":!1},{activator:l(({props:m})=>[t(f,ee(ie(m)),{default:l(()=>[r("mdi-dots-horizontal")]),_:2},1040)]),default:l(()=>[t(H,{rounded:"",dense:""},{default:l(()=>[t(U,{link:"",onClick:m=>o.removeViz(a.i)},{prepend:l(()=>[t(f,{size:"small",icon:"mdi-minus"})]),default:l(()=>[t(E,null,{default:l(()=>[r(" Remove Visualization ")]),_:1})]),_:2},1032,["onClick"]),t(U,{link:"",onClick:m=>s.$router.push({path:"/vizBuilder/"+a.id})},{prepend:l(()=>[t(f,{icon:"mdi-pencil"})]),default:l(()=>[t(E,null,{default:l(()=>[r("Edit")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(V,{id:a.id,softRerenderViz:a.rerender,hardRerenderViz:i.hardRerenderViz,vizHeight:a.hPx,editingViz:!1,externalFilters:i.filters,onDimensions:o.popDimensions},null,8,["id","softRerenderViz","hardRerenderViz","vizHeight","externalFilters","onDimensions"])]),_:2},1032,["height"])]),_:2},1032,["static","x","y","w","h","i","onResize","onResized"]))),128))]),_:1},8,["layout","is-draggable","is-resizable"])]),_:1})]),_:1})]),_:1})}const pe=X(le,[["render",ue]]);export{pe as default};
